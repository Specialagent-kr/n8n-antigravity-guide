---
name: n8n-workflow-builder
description: n8n 워크플로우를 설계, 구축, 설정 및 디버깅하기 위한 전문가급 지침 모음
---

# n8n Workflow Builder Skill

이 Skill은 Antigravity 에이전트가 n8n MCP 도구를 활용하여 고품질의 자동화 워크플로우를 생성하고 유지 관리할 수 있도록 지원합니다.

## 핵심 기능 영역

### 1. 워크플로우 아키텍처 패턴
- **AI 에이전트**: AI Agent 노드를 활용한 지능형 워크플로우 설계
- **HTTP & Webhooks**: 외부 API 연동 및 데이터 수신 최적화
- **데이터베이스**: CRUD 작업을 위한 효율적인 노드 구성
- **스케줄링**: 정기적인 작업 자동화를 위한 트리거 설정

### 2. 노드 정밀 설정
- **속성 발견**: 노드의 `parameters`와 `options`를 정확히 식별
- **의존성 관리**: 상위 설정에 따른 하위 옵션의 변화를 이해하고 적용
- **자격 증명**: `credentials` 연결 및 인증 방식 최적화

### 3. n8n 표현식(Expressions) 마스터
- **구문**: `{{ $json.field }}` 등 n8n 전용 표현식 작성
- **데이터 변환**: 표현식 내에서 JavaScript 메서드를 활용한 데이터 가공
- **참조**: 이전 노드의 데이터에 접근하는 정확한 경로 지정

### 4. 코드 노드 활용 (JS/Python)
- **데이터 접근**: `$input.all()`, `$json` 등을 사용한 입력 데이터 처리
- **로직 구현**: 복잡한 필터링, 매핑 및 외부 라이브러리(지원되는 경우) 활용

### 5. 검증 및 디버깅
- **검증 루프**: MCP의 validation 도구를 사용하여 설정 오류 조기 발견
- **에러 핸들링**: 노드 레벨의 `Error Trigger` 및 재시도 전략 구성

## Antigravity n8n 전문가 운영 규칙 (Locked-In)

모든 n8n 관련 작업 시 다음의 3단계 프로세스를 **반드시** 준수해야 합니다.

### 1단계: 무조건적 사후 검증 (Validation Checkpoint)
- **행동**: 워크플로우를 수정(Partial Update 포함)한 직후, 즉시 `n8n_validate_workflow` 도구를 실행합니다.
- **목표**: 정적 유효성 검사에서 `valid: true`를 확인합니다.
- **조치**: 오류(`errors`)나 경고(`warnings`)가 발견되면 사용자에게 보고하기 전 즉시 수정합니다.

### 2단계: 실행 로그 자동 정밀 분석 (Error Trace First)
- **행동**: 워크플로우 실행 중 에러가 발생하면, 즉시 `n8n_executions` 도구의 `action="get"`과 `mode="error"`를 호출합니다.
- **목표**: 에러가 발생한 정확한 **노드 이름**, **입력 데이터 샘플**, 그리고 **스택 트레이스**를 확보합니다.
- **조치**: 단순히 "에러가 났다"고 보고하는 대신, "X 노드에서 Y 데이터 형식이 맞지 않아 Z 에러가 발생했습니다"와 같이 구체적인 원인과 해결책을 함께 제시합니다.

### 3단계: 노드 버전 및 표현식 최적화 (Advanced Patterns)
- **행동**: `n8n_autofix_workflow` 도구를 주기적으로 활용하거나 수정 시 적용합니다.
- **목표**: 
    - 구식 노드 버전(typeVersion)을 최신으로 업그레이드합니다.
    - 표현식의 `=` 접두사 누락 등을 자동 교정합니다.
- **조치**: n8n 엔진의 최신 표준을 강제 적용하여 런타임 오류 가능성을 최소화합니다.

